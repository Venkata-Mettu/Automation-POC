// Generated from: features/registration.feature
import { test } from "playwright-bdd";

test.describe('Registration and deletion flow for admin roles', () => {

  test.describe('Registration and deletion for <role>', () => {

    test('Registration and deletion for superadmin', async ({ Given, When, And, Then, context }) => { 
      await Given('I am logged in using Microsoft Entra SSO'); 
      await When('I navigate to the Users section'); 
      await And('I click the add users button'); 
      await And('I fill and submit the popup with email "testflow@yopmail.com", role "1", and workspace ""'); 
      await Then('the invitation email should be sent to "testflow@yopmail.com"'); 
      await When('I open Yopmail and check the inbox for "testflow@yopmail.com"', null, { context }); 
      await And('I click the link in the invitation email'); 
      await And('I complete the registration form with:', {"dataTable":{"rows":[{"cells":[{"value":"First Name"},{"value":"test"}]},{"cells":[{"value":"Last Name"},{"value":"flow"}]},{"cells":[{"value":"Password"},{"value":"Testing@123123123"}]},{"cells":[{"value":"Confirm Password"},{"value":"Testing@123123123"}]}]}}); 
      await And('I submit the registration'); 
      await Then('I should see a confirmation and be able to continue'); 
      await When('I search for "testflow@yopmail.com" in the Users section'); 
      await Then('I should see the user "test flow" with email "testflow@yopmail.com" and role "Rimo3 - Superadmin"'); 
      await When('I delete the user "testflow@yopmail.com"'); 
      await Then('searching for "testflow@yopmail.com" should show "No users found."'); 
    });

    test('Registration and deletion for admin', async ({ Given, When, And, Then, context }) => { 
      await Given('I am logged in using Microsoft Entra SSO'); 
      await When('I navigate to the Users section'); 
      await And('I click the add users button'); 
      await And('I fill and submit the popup with email "testflow@yopmail.com", role "2", and workspace "1"'); 
      await Then('the invitation email should be sent to "testflow@yopmail.com"'); 
      await When('I open Yopmail and check the inbox for "testflow@yopmail.com"', null, { context }); 
      await And('I click the link in the invitation email'); 
      await And('I complete the registration form with:', {"dataTable":{"rows":[{"cells":[{"value":"First Name"},{"value":"test"}]},{"cells":[{"value":"Last Name"},{"value":"flow"}]},{"cells":[{"value":"Password"},{"value":"Testing@123123123"}]},{"cells":[{"value":"Confirm Password"},{"value":"Testing@123123123"}]}]}}); 
      await And('I submit the registration'); 
      await Then('I should see a confirmation and be able to continue'); 
      await When('I search for "testflow@yopmail.com" in the Users section'); 
      await Then('I should see the user "test flow" with email "testflow@yopmail.com" and role "Rimo3 - Admin"'); 
      await When('I delete the user "testflow@yopmail.com"'); 
      await Then('searching for "testflow@yopmail.com" should show "No users found."'); 
    });

    test('Registration and deletion for user', async ({ Given, When, And, Then, context }) => { 
      await Given('I am logged in using Microsoft Entra SSO'); 
      await When('I navigate to the Users section'); 
      await And('I click the add users button'); 
      await And('I fill and submit the popup with email "testflow@yopmail.com", role "3", and workspace "1"'); 
      await Then('the invitation email should be sent to "testflow@yopmail.com"'); 
      await When('I open Yopmail and check the inbox for "testflow@yopmail.com"', null, { context }); 
      await And('I click the link in the invitation email'); 
      await And('I complete the registration form with:', {"dataTable":{"rows":[{"cells":[{"value":"First Name"},{"value":"test"}]},{"cells":[{"value":"Last Name"},{"value":"flow"}]},{"cells":[{"value":"Password"},{"value":"Testing@123123123"}]},{"cells":[{"value":"Confirm Password"},{"value":"Testing@123123123"}]}]}}); 
      await And('I submit the registration'); 
      await Then('I should see a confirmation and be able to continue'); 
      await When('I search for "testflow@yopmail.com" in the Users section'); 
      await Then('I should see the user "test flow" with email "testflow@yopmail.com" and role "Rimo3 - User"'); 
      await When('I delete the user "testflow@yopmail.com"'); 
      await Then('searching for "testflow@yopmail.com" should show "No users found."'); 
    });

  });

});

// == technical section ==

test.use({
  $test: ({}, use) => use(test),
  $uri: ({}, use) => use('features/registration.feature'),
  $bddFileData: ({}, use) => use(bddFileData),
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":8,"pickleLine":25,"tags":[],"steps":[{"pwStepLine":9,"gherkinStepLine":4,"keywordType":"Context","textWithKeyword":"Given I am logged in using Microsoft Entra SSO","stepMatchArguments":[]},{"pwStepLine":10,"gherkinStepLine":5,"keywordType":"Action","textWithKeyword":"When I navigate to the Users section","stepMatchArguments":[]},{"pwStepLine":11,"gherkinStepLine":6,"keywordType":"Action","textWithKeyword":"And I click the add users button","stepMatchArguments":[]},{"pwStepLine":12,"gherkinStepLine":7,"keywordType":"Action","textWithKeyword":"And I fill and submit the popup with email \"testflow@yopmail.com\", role \"1\", and workspace \"\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":68,"value":"\"1\"","children":[{"start":69,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":87,"value":"\"\"","children":[{"start":88,"value":"","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":13,"gherkinStepLine":8,"keywordType":"Outcome","textWithKeyword":"Then the invitation email should be sent to \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":14,"gherkinStepLine":9,"keywordType":"Action","textWithKeyword":"When I open Yopmail and check the inbox for \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":15,"gherkinStepLine":10,"keywordType":"Action","textWithKeyword":"And I click the link in the invitation email","stepMatchArguments":[]},{"pwStepLine":16,"gherkinStepLine":11,"keywordType":"Action","textWithKeyword":"And I complete the registration form with:","stepMatchArguments":[]},{"pwStepLine":17,"gherkinStepLine":16,"keywordType":"Action","textWithKeyword":"And I submit the registration","stepMatchArguments":[]},{"pwStepLine":18,"gherkinStepLine":17,"keywordType":"Outcome","textWithKeyword":"Then I should see a confirmation and be able to continue","stepMatchArguments":[]},{"pwStepLine":19,"gherkinStepLine":18,"keywordType":"Action","textWithKeyword":"When I search for \"testflow@yopmail.com\" in the Users section","stepMatchArguments":[{"group":{"start":13,"value":"\"testflow@yopmail.com\"","children":[{"start":14,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":20,"gherkinStepLine":19,"keywordType":"Outcome","textWithKeyword":"Then I should see the user \"test flow\" with email \"testflow@yopmail.com\" and role \"Rimo3 - Superadmin\"","stepMatchArguments":[{"group":{"start":45,"value":"\"testflow@yopmail.com\"","children":[{"start":46,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":77,"value":"\"Rimo3 - Superadmin\"","children":[{"start":78,"value":"Rimo3 - Superadmin","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":21,"gherkinStepLine":20,"keywordType":"Action","textWithKeyword":"When I delete the user \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":18,"value":"\"testflow@yopmail.com\"","children":[{"start":19,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":22,"gherkinStepLine":21,"keywordType":"Outcome","textWithKeyword":"Then searching for \"testflow@yopmail.com\" should show \"No users found.\"","stepMatchArguments":[{"group":{"start":14,"value":"\"testflow@yopmail.com\"","children":[{"start":15,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":25,"pickleLine":26,"tags":[],"steps":[{"pwStepLine":26,"gherkinStepLine":4,"keywordType":"Context","textWithKeyword":"Given I am logged in using Microsoft Entra SSO","stepMatchArguments":[]},{"pwStepLine":27,"gherkinStepLine":5,"keywordType":"Action","textWithKeyword":"When I navigate to the Users section","stepMatchArguments":[]},{"pwStepLine":28,"gherkinStepLine":6,"keywordType":"Action","textWithKeyword":"And I click the add users button","stepMatchArguments":[]},{"pwStepLine":29,"gherkinStepLine":7,"keywordType":"Action","textWithKeyword":"And I fill and submit the popup with email \"testflow@yopmail.com\", role \"2\", and workspace \"1\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":68,"value":"\"2\"","children":[{"start":69,"value":"2","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":87,"value":"\"1\"","children":[{"start":88,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":30,"gherkinStepLine":8,"keywordType":"Outcome","textWithKeyword":"Then the invitation email should be sent to \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":31,"gherkinStepLine":9,"keywordType":"Action","textWithKeyword":"When I open Yopmail and check the inbox for \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":32,"gherkinStepLine":10,"keywordType":"Action","textWithKeyword":"And I click the link in the invitation email","stepMatchArguments":[]},{"pwStepLine":33,"gherkinStepLine":11,"keywordType":"Action","textWithKeyword":"And I complete the registration form with:","stepMatchArguments":[]},{"pwStepLine":34,"gherkinStepLine":16,"keywordType":"Action","textWithKeyword":"And I submit the registration","stepMatchArguments":[]},{"pwStepLine":35,"gherkinStepLine":17,"keywordType":"Outcome","textWithKeyword":"Then I should see a confirmation and be able to continue","stepMatchArguments":[]},{"pwStepLine":36,"gherkinStepLine":18,"keywordType":"Action","textWithKeyword":"When I search for \"testflow@yopmail.com\" in the Users section","stepMatchArguments":[{"group":{"start":13,"value":"\"testflow@yopmail.com\"","children":[{"start":14,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":37,"gherkinStepLine":19,"keywordType":"Outcome","textWithKeyword":"Then I should see the user \"test flow\" with email \"testflow@yopmail.com\" and role \"Rimo3 - Admin\"","stepMatchArguments":[{"group":{"start":45,"value":"\"testflow@yopmail.com\"","children":[{"start":46,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":77,"value":"\"Rimo3 - Admin\"","children":[{"start":78,"value":"Rimo3 - Admin","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":38,"gherkinStepLine":20,"keywordType":"Action","textWithKeyword":"When I delete the user \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":18,"value":"\"testflow@yopmail.com\"","children":[{"start":19,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":39,"gherkinStepLine":21,"keywordType":"Outcome","textWithKeyword":"Then searching for \"testflow@yopmail.com\" should show \"No users found.\"","stepMatchArguments":[{"group":{"start":14,"value":"\"testflow@yopmail.com\"","children":[{"start":15,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":42,"pickleLine":27,"tags":[],"steps":[{"pwStepLine":43,"gherkinStepLine":4,"keywordType":"Context","textWithKeyword":"Given I am logged in using Microsoft Entra SSO","stepMatchArguments":[]},{"pwStepLine":44,"gherkinStepLine":5,"keywordType":"Action","textWithKeyword":"When I navigate to the Users section","stepMatchArguments":[]},{"pwStepLine":45,"gherkinStepLine":6,"keywordType":"Action","textWithKeyword":"And I click the add users button","stepMatchArguments":[]},{"pwStepLine":46,"gherkinStepLine":7,"keywordType":"Action","textWithKeyword":"And I fill and submit the popup with email \"testflow@yopmail.com\", role \"3\", and workspace \"1\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":68,"value":"\"3\"","children":[{"start":69,"value":"3","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":87,"value":"\"1\"","children":[{"start":88,"value":"1","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":47,"gherkinStepLine":8,"keywordType":"Outcome","textWithKeyword":"Then the invitation email should be sent to \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":48,"gherkinStepLine":9,"keywordType":"Action","textWithKeyword":"When I open Yopmail and check the inbox for \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":39,"value":"\"testflow@yopmail.com\"","children":[{"start":40,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":49,"gherkinStepLine":10,"keywordType":"Action","textWithKeyword":"And I click the link in the invitation email","stepMatchArguments":[]},{"pwStepLine":50,"gherkinStepLine":11,"keywordType":"Action","textWithKeyword":"And I complete the registration form with:","stepMatchArguments":[]},{"pwStepLine":51,"gherkinStepLine":16,"keywordType":"Action","textWithKeyword":"And I submit the registration","stepMatchArguments":[]},{"pwStepLine":52,"gherkinStepLine":17,"keywordType":"Outcome","textWithKeyword":"Then I should see a confirmation and be able to continue","stepMatchArguments":[]},{"pwStepLine":53,"gherkinStepLine":18,"keywordType":"Action","textWithKeyword":"When I search for \"testflow@yopmail.com\" in the Users section","stepMatchArguments":[{"group":{"start":13,"value":"\"testflow@yopmail.com\"","children":[{"start":14,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":54,"gherkinStepLine":19,"keywordType":"Outcome","textWithKeyword":"Then I should see the user \"test flow\" with email \"testflow@yopmail.com\" and role \"Rimo3 - User\"","stepMatchArguments":[{"group":{"start":45,"value":"\"testflow@yopmail.com\"","children":[{"start":46,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":77,"value":"\"Rimo3 - User\"","children":[{"start":78,"value":"Rimo3 - User","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":55,"gherkinStepLine":20,"keywordType":"Action","textWithKeyword":"When I delete the user \"testflow@yopmail.com\"","stepMatchArguments":[{"group":{"start":18,"value":"\"testflow@yopmail.com\"","children":[{"start":19,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":56,"gherkinStepLine":21,"keywordType":"Outcome","textWithKeyword":"Then searching for \"testflow@yopmail.com\" should show \"No users found.\"","stepMatchArguments":[{"group":{"start":14,"value":"\"testflow@yopmail.com\"","children":[{"start":15,"value":"testflow@yopmail.com","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
]; // bdd-data-end